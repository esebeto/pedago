window.mc4wpAjaxForms=function(){function a(){return void 0===j.fn.ajaxForm?void k.log("MailChimp for WP: jquery-forms.js is not loaded properly. Not activating AJAX."):($ajaxForms=j(".mc4wp-ajax form"),$ajaxForms.ajaxForm({data:{action:"mc4wp_submit_form"},dataType:"json",url:mc4wp_vars.ajaxurl,delegation:!0,success:e,error:f,beforeSubmit:c}),void(mc4wp_vars.ajaxloader.enabled&&$ajaxForms.find("input").bind("focus.mc4wp",b)))}function b(){j(".mc4wp-ajax-loader").css({"vertical-align":"middle",height:"16px",width:"16px",border:0,background:'url("'+mc4wp_vars.ajaxloader.imgurl+'") no-repeat center center'}),$ajaxForms.find("input").unbind("focus.mc4wp")}function c(a,b){var c,e;i=b.parent(".mc4wp-form"),i.removeClass("mc4wp-form-success"),i.removeClass("mc4wp-form-error"),i.find(".mc4wp-alert").hide(),i.find("#mc4wp-mailchimp-error").remove(),e=b.find('input[type="submit"], button[type="submit"]').first(),e.attr("disabled","disabled"),$loadingText=e.data("loading-text"),$loadingText?(e.data("original-text",d(e)),d(e,$loadingText)):(c=i.find(".mc4wp-ajax-loader"),c.insertAfter(e),c.show().css("display","inline-block"),parseInt(c.css("margin-left"))<5&&c.css("margin-left","5px"));var f=j.Event("mc4wp.ajax.before");f.form=i,j(document).trigger(f)}function d(a,b){if(a.is("button")){var c=a.text();void 0!==b&&a.text(b)}else{var c=a.val();void 0!==b&&a.val(b)}return c}function e(a){var b=j.Event("mc4wp.ajax.after");b.form=i,b.response=a,j(document).trigger(b);var c;c=i.find(".mc4wp-ajax-loader"),c.hide(),$submitButton=i.find('input[type="submit"], button[type="submit"]').first();var e=$submitButton.data("original-text");e&&d($submitButton,e),$submitButton.removeAttr("disabled"),a.success?g(a.redirect,a.hide_form,a.data):h(a.error,a.data)}function f(a){k.log(a)}function g(a,b,c){var d=i.find("form");i.addClass("mc4wp-form-success"),i.find("div.mc4wp-success-message").show(),d.trigger("reset"),a&&""!=a&&window.setTimeout(function(){window.location.replace(a)},2500),b&&d.hide();var e=j.Event("mc4wp.success");e.form=i,e.formData=c,j(document).trigger(e)}function h(a,b){var c,d;c=""==a.type?"error":a.type,"no_lists_selected"===c&&(c="error",k.log("You didn't select a MailChimp list to subscribe to in the form settings.")),i.addClass("mc4wp-form-error"),d=i.find(".mc4wp-"+c+"-message").show(),a.show&&"error"==c&&""!=a.mailchimp_error&&j('<div class="mc4wp-alert mc4wp-notice" id="mc4wp-mailchimp-error"><strong>MailChimp returned this error:</strong><br>'+a.mailchimp_error+"<br><br><em>this message is only visible to administrators</em></div>").insertAfter(d);var e=j.Event("mc4wp.error");e.form=i,e.formData=b,e.error=a,j(document).trigger(e)}var i,j=window.jQuery,k=window.console||{log:function(){}};return{init:function(){a()}}}(),jQuery(document).ready(function(){mc4wpAjaxForms.init()});